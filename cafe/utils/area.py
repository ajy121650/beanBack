# utils/area.py
import re

# 필요한 지역 키워드 추가 (동/구/역/핫플 상권 키워드)
AREA_PATTERNS = [
    r"[가-힣]+구", r"[가-힣]+동", r"[가-힣]+역",
    r"홍대|강남|건대|신림|봉천|관악|신촌|합정|성수|압구정|여의도|잠실|사당|노원|왕십리|서울대입구|설입|삼성|역삼|선릉|이대|연대|종로|명동|광화문|이태원|한남|서촌|북촌|혜화|망원|상수|삼청동",
]

def extract_area_tokens(text: str) -> list[str]:
    found = set()
    for pat in AREA_PATTERNS:
        for m in re.findall(pat, text):
            found.add(m)
    # 길이가 짧거나 애매한 토큰 정리(선택)
    toks = [t.strip() for t in found if len(t.strip()) >= 2]

    # 매핑: 특정 토큰을 다른 지역명으로 변환
    token_map = {
                    # 기존
                    "설입": "관악구",
                    "서울대입구": "관악구",
                    "성수": "성수동",
                    "압구정": "압구정동",
                    "여의도": "여의도동",
                    "잠실": "잠실동",
                    "사당": "사당동",
                    "노원": "노원구",
                    "왕십리": "왕십리동",
                    "홍대": "연희동",
                    "강남": "강남구",
                    "삼성": "삼성동",
                    "역삼": "역삼동",
                    "선릉": "삼성동",
                    "건대": "화양동",
                    "신촌": "창천동",
                    "이대": "대현동",
                    "연대": "신촌동",
                    "종로": "종로구",
                    "명동": "명동",
                    "광화문": "세종로",
                    "이태원": "이태원동",
                    "한남": "한남동",
                    "서촌": "통인동",
                    "북촌": "가회동",
                    "혜화": "명륜동",
                    "망원": "망원동",
                    "합정": "합정동",
                    "상수": "상수동",
                    "삼청동": "삼청동"
                }
    # 매핑 적용
    mapped_toks = [token_map.get(t, t) for t in toks]

    return sorted(mapped_toks, key=lambda x: -len(x))